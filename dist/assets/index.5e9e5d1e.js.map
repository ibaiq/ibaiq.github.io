{"version":3,"file":"index.5e9e5d1e.js","sources":["../../vite/modulepreload-polyfill","../../plugin-vue:export-helper","../../src/store/getters.js","../../src/utils/auth-cookie.js","../../vite/preload-helper","../../src/router/index.js","../../src/router/manage.js","../../src/utils/request.js","../../src/api/user.js","../../src/store/modules/user.js","../../src/store/index.js","../../src/utils/utils.js","../../src/main.js"],"sourcesContent":["const p = function polyfill() {\n    const relList = document.createElement('link').relList;\n    if (relList && relList.supports && relList.supports('modulepreload')) {\n        return;\n    }\n    for (const link of document.querySelectorAll('link[rel=\"modulepreload\"]')) {\n        processPreload(link);\n    }\n    new MutationObserver((mutations) => {\n        for (const mutation of mutations) {\n            if (mutation.type !== 'childList') {\n                continue;\n            }\n            for (const node of mutation.addedNodes) {\n                if (node.tagName === 'LINK' && node.rel === 'modulepreload')\n                    processPreload(node);\n            }\n        }\n    }).observe(document, { childList: true, subtree: true });\n    function getFetchOpts(script) {\n        const fetchOpts = {};\n        if (script.integrity)\n            fetchOpts.integrity = script.integrity;\n        if (script.referrerpolicy)\n            fetchOpts.referrerPolicy = script.referrerpolicy;\n        if (script.crossorigin === 'use-credentials')\n            fetchOpts.credentials = 'include';\n        else if (script.crossorigin === 'anonymous')\n            fetchOpts.credentials = 'omit';\n        else\n            fetchOpts.credentials = 'same-origin';\n        return fetchOpts;\n    }\n    function processPreload(link) {\n        if (link.ep)\n            // ep marker = processed\n            return;\n        link.ep = true;\n        // prepopulate the load record\n        const fetchOpts = getFetchOpts(link);\n        fetch(link.href, fetchOpts);\n    }\n};__VITE_IS_MODERN__&&p();","\nexport default (sfc, props) => {\n  const target = sfc.__vccOpts || sfc;\n  for (const [key, val] of props) {\n    target[key] = val;\n  }\n  return target;\n}\n","const getters = {\n  token: (state) => state.user.token,\n  user: (state) => state.user.user,\n  // menus: (state) => state.menu.menus,\n  // routes: (state) => state.menu.routers,\n  // isCollapse: (state) => state.app.isCollapse,\n  // isMobile: (state) => state.app.isMobile,\n  // topNav: (state) => state.app.topNav,\n};\n\nexport default getters;\n","import Cookie from \"js-cookie\";\n\nconst tokenKey = \"Authorization\";\n\nexport function getToken() {\n  return Cookie.get(tokenKey);\n}\n\nexport function setToken(token) {\n  Cookie.set(tokenKey, token);\n}\n\nexport function remove() {\n  Cookie.remove(tokenKey);\n}\n","const scriptRel = 'modulepreload';const seen = {};const base = '/';export const __vitePreload = function preload(baseModule, deps) {\n    // @ts-ignore\n    if (!__VITE_IS_MODERN__ || !deps || deps.length === 0) {\n        return baseModule();\n    }\n    return Promise.all(deps.map((dep) => {\n        // @ts-ignore\n        dep = `${base}${dep}`;\n        // @ts-ignore\n        if (dep in seen)\n            return;\n        // @ts-ignore\n        seen[dep] = true;\n        const isCss = dep.endsWith('.css');\n        const cssSelector = isCss ? '[rel=\"stylesheet\"]' : '';\n        // @ts-ignore check if the file is already preloaded by SSR markup\n        if (document.querySelector(`link[href=\"${dep}\"]${cssSelector}`)) {\n            return;\n        }\n        // @ts-ignore\n        const link = document.createElement('link');\n        // @ts-ignore\n        link.rel = isCss ? 'stylesheet' : scriptRel;\n        if (!isCss) {\n            link.as = 'script';\n            link.crossOrigin = '';\n        }\n        link.href = dep;\n        // @ts-ignore\n        document.head.appendChild(link);\n        if (isCss) {\n            return new Promise((res, rej) => {\n                link.addEventListener('load', res);\n                link.addEventListener('error', rej);\n            });\n        }\n    })).then(() => baseModule());\n}","import { createRouter, createWebHistory } from \"vue-router\";\n\nconst routes = [\n  {\n    path: \"/\",\n    name: \"Index\",\n    component: () => import(\"@/views/Index.vue\"),\n  },\n  {\n    path: \"/login\",\n    name: \"Login\",\n    component: () => import(\"@/views/Login.vue\"),\n  },\n];\n\nconst router = createRouter({\n  history: createWebHistory(),\n  routes,\n});\n\nexport default router;\n","const asyncManage = [\n  {\n    path: \"/manage\",\n    name: \"Manage\",\n    component: () => import(\"@/components/parentView/Index\"),\n  },\n];\n\nexport default asyncManage;\n","import axios from \"axios\";\nimport store from \"@/store/index.js\";\nimport { ElMessage } from \"element-plus\";\nimport { remove } from \"@/utils/auth-cookie.js\";\nimport router from \"@/router/index.js\";\nimport asyncManage from \"@/router/manage.js\";\n\nconst service = axios.create({\n  baseURL: import.meta.env.VITE_APP_BASE_API,\n  timeout: 10000,\n});\n\nservice.interceptors.request.use((config) => {\n  if (store.getters.token) {\n    config.headers[\"Authorization\"] = \"Bearer\" + store.getters.token;\n  }\n  return config;\n});\n\nservice.interceptors.response.use(\n  (success) => {\n    return success.data;\n  },\n  (error) => {\n    let { message } = error;\n    if (message.includes(\"timeout\")) {\n      error.response.data.msg = \"接口请求连接超时\";\n      ElMessage.warning(\"接口请求连接超时\");\n    } else if (message === \"Network Error\") {\n      error.response.data.msg = \"后端接口连接异常\";\n      ElMessage.error(\"后端接口连接异常\");\n    }\n    if (error.response.status === 401) {\n      remove();\n      store.commit(\"user/SET_TOKEN\", undefined);\n      store.commit(\"user/SET_USER\", undefined);\n      if (router.currentRoute.value.path.includes(asyncManage[0].path)) {\n        router\n          .replace({\n            path: \"/login\",\n            query: { redirect: router.currentRoute.value.fullPath },\n          })\n          .then()\n          .catch();\n      }\n      ElMessage.error(error.response.data.msg);\n    } else if (\n      error.response.status === 500 ||\n      error.response.status === 400 ||\n      error.response.status === 404\n    ) {\n      ElMessage.error(error.response.data.msg || \"服务器开小差了~\");\n    } else if (error.response.status === 403) {\n      ElMessage.warning(error.response.data.msg);\n    } else if (error.response.status === 405) {\n      ElMessage.warning(error.response.data.msg);\n    }\n    return Promise.reject(error.response.data);\n  }\n);\n\nexport default service;\n","import request from \"@/utils/request.js\";\nimport qs from \"qs\";\n\n/**\n * 获取个人信息\n */\nexport function profile() {\n  return request(\"/user/profile\", {\n    method: \"GET\",\n  });\n}\n\n/**\n * 登录\n */\nexport function login(user) {\n  return request(\"/login\", {\n    method: \"POST\",\n    data: qs.stringify(user),\n  });\n}\n\n/**\n * 注销登录\n */\nexport function logout() {\n  return request(\"/logout\", {\n    method: \"POST\",\n  });\n}\n","import { getToken, remove } from \"@/utils/auth-cookie.js\";\nimport { logout, profile } from \"@/api/user.js\";\nimport { ElMessage } from \"element-plus\";\n\nconst state = {\n  token: getToken(),\n  user: undefined,\n};\n\nconst mutations = {\n  SET_TOKEN: (state, token) => {\n    state.token = token;\n  },\n  SET_USER: (state, user) => {\n    state.user = user;\n  },\n};\n\nconst actions = {\n  Profile: ({ commit }) => {\n    return new Promise((resolve, reject) => {\n      profile()\n        .then((res) => {\n          let reg =\n            /^(http:\\/\\/|https:\\/\\/|\\/\\/)?(([A-Za-z0-9]+-[A-Za-z0-9]+|[A-Za-z0-9]+)\\.)+([A-Za-z]+)[/?:]?.*$/;\n          res.data.avatar = reg.test(res.data.avatar)\n            ? res.data.avatar\n            : import.meta.env.VITE_APP_BASE_API + res.data.avatar;\n          commit(\"SET_USER\", res.data);\n          resolve(res);\n        })\n        .catch((err) => {\n          reject(err);\n        });\n    });\n  },\n  Logout: ({ commit }) => {\n    return new Promise((resolve, reject) => {\n      logout()\n        .then(() => {\n          commit(\"SET_TOKEN\", undefined);\n          commit(\"SET_USER\", undefined);\n          resolve();\n        })\n        .catch(() => {\n          commit(\"SET_TOKEN\", undefined);\n          commit(\"SET_USER\", undefined);\n          reject();\n        });\n      remove();\n      ElMessage.success(\"注销成功\");\n    });\n  },\n};\n\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions,\n};\n","import { createStore } from \"vuex\";\nimport getters from \"./getters.js\";\nimport { user } from \"./modules/index.js\";\n\nexport default createStore({\n  modules: {\n    user,\n  },\n  getters,\n});\n","// 将el-icon的组件名称AbbbCddd转化为abbb-cddd形式\n// 此前用switch做组件名时因关键字重复报错，所以格式统一加了前缀\n// 例：Switch转换为switch，ArrowDownBold转换为arrow-down-bold\nexport function transElIconName(iconName) {\n  return iconName.replace(/[A-Z]/g, (match) => \"-\" + match.toLowerCase());\n}\n","import { createApp } from \"vue\";\nimport App from \"./App.vue\";\nimport \"./assets/index.css\";\nimport \"./assets/index.scss\";\nimport \"nprogress/css/nprogress.css\";\nimport ElementPlus from \"element-plus\";\nimport \"element-plus/dist/index.css\";\nimport zhCn from \"element-plus/es/locale/lang/zh-cn\";\nimport store from \"@/store/index.js\";\nimport router from \"@/router/index.js\";\nimport * as ElIconModules from \"@element-plus/icons-vue\";\nimport { transElIconName } from \"@/utils/utils.js\";\n\nconst app = createApp(App);\n\nfor (let iconName in ElIconModules) {\n  app.component(transElIconName(iconName), ElIconModules[iconName]);\n}\n\napp\n  .use(router)\n  .use(store)\n  .use(ElementPlus, {\n    locale: zhCn,\n  })\n  .mount(\"#app\");\n"],"names":["Cookie","request","qs","ElementPlus"],"mappings":"oIAAA,KAAM,GAAI,UAAoB,CAC1B,KAAM,GAAU,SAAS,cAAc,QAAQ,QAC/C,GAAI,GAAW,EAAQ,UAAY,EAAQ,SAAS,iBAChD,OAEJ,SAAW,KAAQ,UAAS,iBAAiB,6BACzC,EAAe,GAEnB,GAAI,kBAAiB,AAAC,GAAc,CAChC,SAAW,KAAY,GACnB,GAAI,EAAS,OAAS,YAGtB,SAAW,KAAQ,GAAS,WACxB,AAAI,EAAK,UAAY,QAAU,EAAK,MAAQ,iBACxC,EAAe,KAG5B,QAAQ,SAAU,CAAE,UAAW,GAAM,QAAS,KACjD,WAAsB,EAAQ,CAC1B,KAAM,GAAY,GAClB,MAAI,GAAO,WACP,GAAU,UAAY,EAAO,WAC7B,EAAO,gBACP,GAAU,eAAiB,EAAO,gBACtC,AAAI,EAAO,cAAgB,kBACvB,EAAU,YAAc,UACvB,AAAI,EAAO,cAAgB,YAC5B,EAAU,YAAc,OAExB,EAAU,YAAc,cACrB,EAEX,WAAwB,EAAM,CAC1B,GAAI,EAAK,GAEL,OACJ,EAAK,GAAK,GAEV,KAAM,GAAY,EAAa,GAC/B,MAAM,EAAK,KAAM,KAEvB,AAAoB,ICzCtB,MAAe,CAAC,EAAK,IAAU,CAC7B,KAAM,GAAS,EAAI,WAAa,EAChC,SAAW,CAAC,EAAK,IAAQ,GACvB,EAAO,GAAO,EAEhB,MAAO,kGCNT,KAAM,GAAU,CACd,MAAO,AAAC,GAAU,EAAM,KAAK,MAC7B,KAAM,AAAC,GAAU,EAAM,KAAK,MCAxB,EAAW,gBAEV,YAAoB,CACzB,MAAOA,GAAO,IAAI,GAGb,WAAkB,EAAO,CAC9BA,EAAO,IAAI,EAAU,GAGhB,YAAkB,CACvBA,EAAO,OAAO,GCbhB,KAAM,GAAY,gBAAsB,EAAO,GAAS,EAAO,IAAiB,EAAgB,SAAiB,EAAY,EAAM,CAE/H,MAAI,AAAuB,CAAC,GAAQ,EAAK,SAAW,EACzC,IAEJ,QAAQ,IAAI,EAAK,IAAI,AAAC,GAAQ,CAIjC,GAFA,EAAM,GAAG,IAAO,IAEZ,IAAO,GACP,OAEJ,EAAK,GAAO,GACZ,KAAM,GAAQ,EAAI,SAAS,QACrB,EAAc,EAAQ,qBAAuB,GAEnD,GAAI,SAAS,cAAc,cAAc,MAAQ,KAC7C,OAGJ,KAAM,GAAO,SAAS,cAAc,QAUpC,GARA,EAAK,IAAM,EAAQ,aAAe,EAC7B,GACD,GAAK,GAAK,SACV,EAAK,YAAc,IAEvB,EAAK,KAAO,EAEZ,SAAS,KAAK,YAAY,GACtB,EACA,MAAO,IAAI,SAAQ,CAAC,EAAK,IAAQ,CAC7B,EAAK,iBAAiB,OAAQ,GAC9B,EAAK,iBAAiB,QAAS,QAGvC,KAAK,IAAM,MClCb,EAAS,CACb,CACE,KAAM,IACN,KAAM,QACN,UAAW,IAAM,yDAEnB,CACE,KAAM,SACN,KAAM,QACN,UAAW,IAAM,0DAIf,EAAS,EAAa,CAC1B,QAAS,IACT,WCjBI,EAAc,CAClB,CACE,KAAM,UACN,KAAM,SACN,UAAW,IAAM,0DCGf,EAAU,EAAM,OAAO,CAC3B,QAAS,YACT,QAAS,MAGX,EAAQ,aAAa,QAAQ,IAAI,AAAC,GAC5B,GAAM,QAAQ,OAChB,GAAO,QAAQ,cAAmB,SAAW,EAAM,QAAQ,OAEtD,IAGT,EAAQ,aAAa,SAAS,IAC5B,AAAC,GACQ,EAAQ,KAEjB,AAAC,GAAU,CACT,GAAI,CAAE,WAAY,EAClB,MAAI,GAAQ,SAAS,WACnB,GAAM,SAAS,KAAK,IAAM,mDAC1B,EAAU,QAAQ,qDACT,IAAY,iBACrB,GAAM,SAAS,KAAK,IAAM,mDAC1B,EAAU,MAAM,qDAElB,AAAI,EAAM,SAAS,SAAW,IAC5B,KACA,EAAM,OAAO,iBAAkB,QAC/B,EAAM,OAAO,gBAAiB,QAC1B,EAAO,aAAa,MAAM,KAAK,SAAS,EAAY,GAAG,OACzD,EACG,QAAQ,CACP,KAAM,SACN,MAAO,CAAE,SAAU,EAAO,aAAa,MAAM,YAE9C,OACA,QAEL,EAAU,MAAM,EAAM,SAAS,KAAK,MAC/B,AACL,EAAM,SAAS,SAAW,KAC1B,EAAM,SAAS,SAAW,KAC1B,EAAM,SAAS,SAAW,IAE1B,EAAU,MAAM,EAAM,SAAS,KAAK,KAAO,+CACtC,AAAI,EAAM,SAAS,SAAW,IACnC,EAAU,QAAQ,EAAM,SAAS,KAAK,KAC7B,EAAM,SAAS,SAAW,KACnC,EAAU,QAAQ,EAAM,SAAS,KAAK,KAEjC,QAAQ,OAAO,EAAM,SAAS,QCnDlC,YAAmB,CACxB,MAAOC,GAAQ,gBAAiB,CAC9B,OAAQ,QAOL,WAAe,EAAM,CAC1B,MAAOA,GAAQ,SAAU,CACvB,OAAQ,OACR,KAAMC,EAAG,UAAU,KAOhB,YAAkB,CACvB,MAAOD,GAAQ,UAAW,CACxB,OAAQ,SCvBZ,KAAM,GAAQ,CACZ,MAAO,IACP,KAAM,QAGF,EAAY,CAChB,UAAW,CAAC,EAAO,IAAU,CAC3B,EAAM,MAAQ,GAEhB,SAAU,CAAC,EAAO,IAAS,CACzB,EAAM,KAAO,IAIX,EAAU,CACd,QAAS,CAAC,CAAE,YACH,GAAI,SAAQ,CAAC,EAAS,IAAW,CACtC,IACG,KAAK,AAAC,GAAQ,CACb,GAAI,GACF,iGACF,EAAI,KAAK,OAAS,EAAI,KAAK,EAAI,KAAK,QAChC,EAAI,KAAK,OACT,YAAoC,EAAI,KAAK,OACjD,EAAO,WAAY,EAAI,MACvB,EAAQ,KAET,MAAM,AAAC,GAAQ,CACd,EAAO,OAIf,OAAQ,CAAC,CAAE,YACF,GAAI,SAAQ,CAAC,EAAS,IAAW,CACtC,IACG,KAAK,IAAM,CACV,EAAO,YAAa,QACpB,EAAO,WAAY,QACnB,MAED,MAAM,IAAM,CACX,EAAO,YAAa,QACpB,EAAO,WAAY,QACnB,MAEJ,IACA,EAAU,QAAQ,+BAKxB,MAAe,CACb,WAAY,GACZ,QACA,YACA,aCvDa,EAAY,CACzB,QAAS,CACP,QAEF,YCLK,WAAyB,EAAU,CACxC,MAAO,GAAS,QAAQ,SAAU,AAAC,GAAU,IAAM,EAAM,eCS3D,KAAM,GAAM,EAAU,GAEtB,OAAS,KAAY,GACnB,EAAI,UAAU,EAAgB,GAAW,EAAc,IAGzD,EACG,IAAI,GACJ,IAAI,GACJ,IAAIE,EAAa,CAChB,OAAQ,IAET,MAAM"}
{"version":3,"file":"Login.53c660ac.js","sources":["../../src/views/Login.vue"],"sourcesContent":["<template>\n  <section>\n    <div class=\"login-box\">\n      <div class=\"main\">\n        <div class=\"current-header\">\n          <el-icon />\n        </div>\n        <h3>用户登录</h3>\n        <el-form :model=\"data.user\" :rules=\"rules\" ref=\"form\">\n          <el-form-item prop=\"username\">\n            <el-input\n              :prefix-icon=\"User\"\n              placeholder=\"请输入用户名\"\n              v-model=\"data.user.username\"\n            />\n          </el-form-item>\n          <el-form-item prop=\"password\">\n            <el-input\n              :prefix-icon=\"Lock\"\n              placeholder=\"请输入密码\"\n              show-password\n              v-model=\"data.user.password\"\n            />\n          </el-form-item>\n          <el-form-item>\n            <el-button\n              type=\"primary\"\n              size=\"medium\"\n              :loading=\"data.loading\"\n              @click=\"submit\"\n            >\n              <span v-if=\"!data.loading\">登 录</span>\n              <span v-else>登 录 中...</span>\n            </el-button>\n          </el-form-item>\n        </el-form>\n      </div>\n    </div>\n  </section>\n</template>\n\n<script setup>\nimport { getCurrentInstance, reactive, ref, watch } from \"vue\";\nimport { useRoute, useRouter } from \"vue-router\";\nimport { useStore } from \"vuex\";\nimport { login } from \"@/api/user.js\";\nimport { Lock, User } from \"@element-plus/icons-vue\";\nimport { setToken } from \"@/utils/auth-cookie.js\";\n\nconst { proxy } = getCurrentInstance();\nconst store = useStore();\nconst router = useRouter();\nconst route = useRoute();\n\nconst data = reactive({\n  user: {\n    username: \"\",\n    password: \"\",\n  },\n  loading: false,\n});\n\nif (import.meta.env.DEV) {\n  data.user = {\n    username: \"admin\",\n    password: \"admin\",\n  };\n}\n\nconst rules = reactive({\n  username: [\n    { required: true, message: \"请输入用户名！\", trigger: \"blur\" },\n    { min: 4, max: 18, message: \"长度在 4 到 18 个字符\", trigger: \"blur\" },\n  ],\n  password: [\n    { required: true, message: \"请输入密码！\", trigger: \"blur\" },\n    { min: 5, max: 18, message: \"长度在 5 到 18 个字符\", trigger: \"blur\" },\n  ],\n});\n\nconst redirect = ref(undefined);\n\nwatch(\n  () => route.query,\n  (value) => {\n    redirect.value = value.redirect;\n  },\n  {\n    deep: true,\n    immediate: true,\n  }\n);\n\nconst submit = () => {\n  proxy.$refs.form.validate((valid) => {\n    if (valid) {\n      data.loading = true;\n      login(data.user)\n        .then((res) => {\n          proxy.$message.success(res.msg);\n          setToken(res.data.token);\n          store.commit(\"user/SET_TOKEN\", res.data.token);\n          router.replace(redirect.value ? redirect.value : \"/\");\n        })\n        .catch((err) => {\n          data.loading = false;\n        });\n    } else {\n      return false;\n    }\n  });\n};\n\ndocument.onkeyup = function (e) {\n  if (e.keyCode === 13) {\n    submit();\n  }\n};\n</script>\n\n<style scoped lang=\"scss\">\n* {\n  padding: 0;\n  margin: 0;\n  box-sizing: border-box;\n}\n\nsection {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: linear-gradient(94.3deg, #1a2140 10.9%, #515473 87.1%);\n  overflow: hidden;\n}\n\nsection:before {\n  width: 450px;\n  height: 450px;\n  transform: translate(-100%, -80%);\n  background-color: #ffe53b;\n  background-image: linear-gradient(147deg, #ffe53b, #ff2525 74%);\n  -webkit-animation: pulse-4da47d57 1.5s infinite;\n  animation: pulse 1.5s infinite;\n}\n\nsection:after {\n  width: 300px;\n  height: 300px;\n  transform: translate(10%, 20%);\n  background-color: #fa8bff;\n  background-image: linear-gradient(45deg, #fa8bff, #2bd2ff 52%, #2bff88 74%);\n  -webkit-animation: pulse-4da47d57 1.6s infinite;\n  animation: pulse 1.6s infinite;\n}\n\nsection:after,\nsection:before {\n  position: absolute;\n  content: \"\";\n  z-index: 2;\n  top: 50%;\n  left: 50%;\n  border-radius: 50%;\n  box-shadow: 0 0 0 0 hsla(0, 0%, 100%, 0.2);\n}\n\n@-webkit-keyframes pulse {\n  50% {\n    box-shadow: 0 0 0 50px hsla(0, 0%, 100%, 0);\n  }\n  to {\n    box-shadow: 0 0 0 0 hsla(0, 0%, 100%, 0);\n  }\n}\n\n@keyframes pulse {\n  50% {\n    box-shadow: 0 0 0 50px hsla(0, 0%, 100%, 0);\n  }\n  to {\n    box-shadow: 0 0 0 0 hsla(0, 0%, 100%, 0);\n  }\n}\n\n.login-box {\n  position: absolute;\n  z-index: 1009;\n  width: 100%;\n  max-width: 320px;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n\n  .main {\n    text-align: center;\n    padding: 0 30px 31px;\n    background: hsla(0, 0%, 100%, 0.1);\n    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);\n    border-radius: 10px;\n    border: 1px solid hsla(0, 0%, 100%, 0.2);\n    border-bottom: 1px solid hsla(0, 0%, 100%, 0.1);\n    border-right: 1px solid hsla(0, 0%, 100%, 0.1);\n    backdrop-filter: blur(20px);\n    -webkit-backdrop-filter: blur(20px);\n\n    .el-form-item.is-error {\n      :deep(.el-input__inner) {\n        border: 2px solid var(--el-color-danger);\n        box-shadow: 0 0 5px rgba(245, 108, 108, 0.75);\n      }\n    }\n\n    h3 {\n      color: white;\n      font-size: 25px;\n      text-align: center;\n      margin: 5px 10px 25px;\n    }\n\n    .current-header {\n      text-align: left;\n      color: white;\n      line-height: 61px;\n      cursor: pointer;\n      display: table-cell;\n\n      .el-icon {\n        margin-right: 5px;\n      }\n    }\n\n    .el-form-item {\n      margin-bottom: 25px;\n\n      :deep(.el-input__inner) {\n        height: 50px;\n        line-height: 50px;\n      }\n\n      :deep(.el-form-item__error) {\n        color: white;\n      }\n\n      .el-input {\n        --el-input-bg-color: transparent;\n        --el-input-icon-color: white;\n        --el-input-text-color: white;\n        --el-input-border-radius: 8px;\n        --el-input-border: 1px solid;\n        --el-input-border-color: hsla(0, 0%, 100%, 0.5);\n        --el-input-font-color: white;\n        --el-input-focus-border: white;\n        --el-input-placeholder-color: white;\n        line-height: 50px;\n      }\n\n      .el-button {\n        line-height: 50px;\n        width: 100%;\n        background: linear-gradient(90deg, #02aab0 0, #00cdac 51%, #02aab0);\n        background-size: 200% auto;\n        border: 0;\n        border-radius: 8px;\n        color: white;\n        cursor: pointer;\n        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);\n        transition: 0.4s ease;\n      }\n\n      .el-button:hover {\n        background-position: 100%;\n        color: white;\n        text-decoration: none;\n      }\n    }\n  }\n}\n</style>\n"],"names":[],"mappings":"qZAiDA,KAAM,CAAE,SAAU,IACZ,EAAQ,IACR,EAAS,IACT,EAAQ,IAER,EAAO,EAAS,CACpB,KAAM,CACJ,SAAU,GACV,SAAU,IAEZ,QAAS,KAUL,EAAQ,EAAS,CACrB,SAAU,CACR,CAAE,SAAU,GAAM,QAAS,6CAAW,QAAS,QAC/C,CAAE,IAAK,EAAG,IAAK,GAAI,QAAS,oDAAkB,QAAS,SAEzD,SAAU,CACR,CAAE,SAAU,GAAM,QAAS,uCAAU,QAAS,QAC9C,CAAE,IAAK,EAAG,IAAK,GAAI,QAAS,oDAAkB,QAAS,WAIrD,EAAW,EAAI,QAErB,EACE,IAAM,EAAM,MACZ,AAAC,GAAU,CACT,EAAS,MAAQ,EAAM,UAEzB,CACE,KAAM,GACN,UAAW,KAIf,KAAM,GAAS,IAAM,CACnB,EAAM,MAAM,KAAK,SAAS,AAAC,GAAU,CACnC,GAAI,EACF,EAAK,QAAU,GACf,EAAM,EAAK,MACR,KAAK,AAAC,GAAQ,CACb,EAAM,SAAS,QAAQ,EAAI,KAC3B,EAAS,EAAI,KAAK,OAClB,EAAM,OAAO,iBAAkB,EAAI,KAAK,OACxC,EAAO,QAAQ,EAAS,MAAQ,EAAS,MAAQ,OAElD,MAAM,AAAC,GAAQ,CACd,EAAK,QAAU,SAGnB,OAAO,MAKb,gBAAS,QAAU,SAAU,EAAG,CAC9B,AAAI,EAAE,UAAY,IAChB"}